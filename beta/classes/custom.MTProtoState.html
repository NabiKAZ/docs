<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>MTProtoState | telegram</title><meta name="description" content="Documentation for telegram"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">telegram</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">telegram</a></li><li><a href="../modules/custom.html">custom</a></li><li><a href="custom.MTProtoState.html">MTProtoState</a></li></ul><h1>Class MTProtoState</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><span class="target">MTProtoState</span></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Constructors</h3><ul class="tsd-index-list"><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="custom.MTProtoState.html#constructor" class="tsd-kind-icon">constructor</a></li></ul></section><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-class"><a href="custom.MTProtoState.html#timeOffset" class="tsd-kind-icon">time<wbr/>Offset</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="custom.MTProtoState.html#salt" class="tsd-kind-icon">salt</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="custom.MTProtoState.html#_sequence" class="tsd-kind-icon">_sequence</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#reset" class="tsd-kind-icon">reset</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#updateMessageId" class="tsd-kind-icon">update<wbr/>Message<wbr/>Id</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#_calcKey" class="tsd-kind-icon">_calc<wbr/>Key</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#writeDataAsMessage" class="tsd-kind-icon">write<wbr/>Data<wbr/>As<wbr/>Message</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#encryptMessageData" class="tsd-kind-icon">encrypt<wbr/>Message<wbr/>Data</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#decryptMessageData" class="tsd-kind-icon">decrypt<wbr/>Message<wbr/>Data</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#updateTimeOffset" class="tsd-kind-icon">update<wbr/>Time<wbr/>Offset</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Constructors</h2><section class="tsd-panel tsd-member tsd-kind-constructor tsd-parent-kind-class"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link">constructor<a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-constructor tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">new MTProto<wbr/>State<span class="tsd-signature-symbol">(</span>authKey<span class="tsd-signature-symbol">?: </span><a href="custom.AuthKey.html" class="tsd-signature-type" data-tsd-kind="Class">AuthKey</a>, loggers<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">any</span>, securityChecks<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="custom.MTProtoState.html" class="tsd-signature-type" data-tsd-kind="Class">MTProtoState</a></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L49">gramjs/network/MTProtoState.ts:49</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p><code>telethon.network.mtprotosender.MTProtoSender</code> needs to hold a state
in order to be able to encrypt and decrypt incoming/outgoing messages,
as well as generating the message IDs. Instances of this class hold
together all the required information.</p>
</div><div><p>It doesn&#39;t make sense to use <code>telethon.sessions.abstract.Session</code> for
the sender because the sender should <em>not</em> be concerned about storing
this information to disk, as one may create as many senders as they
desire to any other data center, or some CDN. Using the same session
for all these is not a good idea as each need their own authkey, and
the concept of &quot;copying&quot; sessions with the unnecessary entities or
updates state for these connections doesn&#39;t make sense.</p>
<p>While it would be possible to have a <code>MTProtoPlainState</code> that does no
encryption so that it was usable through the <code>MTProtoLayer</code> and thus
avoid the need for a <code>MTProtoPlainSender</code>, the <code>MTProtoLayer</code> is more
focused to efficiency and this state is also more advanced (since it
supports gzipping and invoking after other message IDs). There are too
many methods that would be needed to make it convenient to use for the
authentication process, at which point the <code>MTProtoPlainSender</code> is better</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> authKey: <a href="custom.AuthKey.html" class="tsd-signature-type" data-tsd-kind="Class">AuthKey</a></h5></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> loggers: <span class="tsd-signature-type">any</span></h5></li><li><h5>securityChecks: <span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> = true</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
</div></div></li></ul><h4 class="tsd-returns-title">Returns <a href="custom.MTProtoState.html" class="tsd-signature-type" data-tsd-kind="Class">MTProtoState</a></h4></li></ul></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="timeOffset" class="tsd-anchor"></a><h3 class="tsd-anchor-link">time<wbr/>Offset<a href="#timeOffset" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">time<wbr/>Offset<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L15">gramjs/network/MTProtoState.ts:15</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="salt" class="tsd-anchor"></a><h3 class="tsd-anchor-link">salt<a href="#salt" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">salt<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">BigInteger</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L16">gramjs/network/MTProtoState.ts:16</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-class"><a id="_sequence" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_sequence<a href="#_sequence" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">_sequence<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L18">gramjs/network/MTProtoState.ts:18</a></li></ul></aside></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="reset" class="tsd-anchor"></a><h3 class="tsd-anchor-link">reset<a href="#reset" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">reset<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L64">gramjs/network/MTProtoState.ts:64</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Resets the state</p>
</div></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="updateMessageId" class="tsd-anchor"></a><h3 class="tsd-anchor-link">update<wbr/>Message<wbr/>Id<a href="#updateMessageId" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">update<wbr/>Message<wbr/>Id<span class="tsd-signature-symbol">(</span>message<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L77">gramjs/network/MTProtoState.ts:77</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Updates the message ID to a new one,
used when the time offset changed.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>message: <span class="tsd-signature-type">any</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="_calcKey" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_calc<wbr/>Key<a href="#_calcKey" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">_calc<wbr/>Key<span class="tsd-signature-symbol">(</span>authKey<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span>, msgKey<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span>, client<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-symbol">{ </span>key<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol">; </span>iv<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L88">gramjs/network/MTProtoState.ts:88</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Calculate the key based on Telegram guidelines, specifying whether it&#39;s the client or not</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>authKey: <span class="tsd-signature-type">Buffer</span></h5></li><li><h5>msgKey: <span class="tsd-signature-type">Buffer</span></h5></li><li><h5>client: <span class="tsd-signature-type">boolean</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-symbol">{ </span>key<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol">; </span>iv<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol"> }</span><span class="tsd-signature-symbol">&gt;</span></h4><div></div></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="writeDataAsMessage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">write<wbr/>Data<wbr/>As<wbr/>Message<a href="#writeDataAsMessage" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">write<wbr/>Data<wbr/>As<wbr/>Message<span class="tsd-signature-symbol">(</span>buffer<span class="tsd-signature-symbol">: </span><a href="extensions.BinaryWriter.html" class="tsd-signature-type" data-tsd-kind="Class">BinaryWriter</a>, data<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span>, contentRelated<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">boolean</span>, afterId<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">BigInteger</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">BigInteger</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L115">gramjs/network/MTProtoState.ts:115</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Writes a message containing the given data into buffer.
Returns the message id.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>buffer: <a href="extensions.BinaryWriter.html" class="tsd-signature-type" data-tsd-kind="Class">BinaryWriter</a></h5></li><li><h5>data: <span class="tsd-signature-type">Buffer</span></h5></li><li><h5>contentRelated: <span class="tsd-signature-type">boolean</span></h5></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> afterId: <span class="tsd-signature-type">BigInteger</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">BigInteger</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="encryptMessageData" class="tsd-anchor"></a><h3 class="tsd-anchor-link">encrypt<wbr/>Message<wbr/>Data<a href="#encryptMessageData" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">encrypt<wbr/>Message<wbr/>Data<span class="tsd-signature-symbol">(</span>data<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L154">gramjs/network/MTProtoState.ts:154</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Encrypts the given message data using the current authorization key
following MTProto 2.0 guidelines core.telegram.org/mtproto/description.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>data: <span class="tsd-signature-type">Buffer</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="decryptMessageData" class="tsd-anchor"></a><h3 class="tsd-anchor-link">decrypt<wbr/>Message<wbr/>Data<a href="#decryptMessageData" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">decrypt<wbr/>Message<wbr/>Data<span class="tsd-signature-symbol">(</span>body<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="custom.TLMessage.html" class="tsd-signature-type" data-tsd-kind="Class">TLMessage</a><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L196">gramjs/network/MTProtoState.ts:196</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Inverse of <code>encrypt_message_data</code> for incoming server messages.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>body: <span class="tsd-signature-type">Buffer</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="custom.TLMessage.html" class="tsd-signature-type" data-tsd-kind="Class">TLMessage</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class"><a id="updateTimeOffset" class="tsd-anchor"></a><h3 class="tsd-anchor-link">update<wbr/>Time<wbr/>Offset<a href="#updateTimeOffset" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-class"><li class="tsd-signature tsd-kind-icon">update<wbr/>Time<wbr/>Offset<span class="tsd-signature-symbol">(</span>correctMsgId<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">BigInteger</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/gram-js/gramjs/blob/13616b1/gramjs/network/MTProtoState.ts#L283">gramjs/network/MTProtoState.ts:283</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Updates the time offset to the correct
one given a known valid message ID.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>correctMsgId: <span class="tsd-signature-type">BigInteger</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
</div></div></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">number</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="../modules/helpers.html">helpers</a></li><li class=" tsd-kind-namespace"><a href="../modules/password.html">password</a></li><li class=" tsd-kind-namespace"><a href="../modules/utils.html">utils</a></li><li class=" tsd-kind-namespace"><a href="../modules/client.html">client</a></li><li class=" tsd-kind-namespace"><a href="../modules/errors.html">errors</a></li><li class=" tsd-kind-namespace"><a href="../modules/extensions.html">extensions</a></li><li class=" tsd-kind-namespace"><a href="../modules/sessions.html">sessions</a></li><li class=" tsd-kind-namespace"><a href="../modules/Api.html">Api</a></li><li class=" tsd-kind-namespace"><a href="../modules/tl.html">tl</a></li><li class="current tsd-kind-namespace"><a href="../modules/custom.html">custom</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-class tsd-parent-kind-namespace"><a href="custom.MTProtoState.html" class="tsd-kind-icon">MTProto<wbr/>State</a><ul><li class="tsd-kind-constructor tsd-parent-kind-class"><a href="custom.MTProtoState.html#constructor" class="tsd-kind-icon">constructor</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="custom.MTProtoState.html#timeOffset" class="tsd-kind-icon">time<wbr/>Offset</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="custom.MTProtoState.html#salt" class="tsd-kind-icon">salt</a></li><li class="tsd-kind-property tsd-parent-kind-class"><a href="custom.MTProtoState.html#_sequence" class="tsd-kind-icon">_sequence</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#reset" class="tsd-kind-icon">reset</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#updateMessageId" class="tsd-kind-icon">update<wbr/>Message<wbr/>Id</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#_calcKey" class="tsd-kind-icon">_calc<wbr/>Key</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#writeDataAsMessage" class="tsd-kind-icon">write<wbr/>Data<wbr/>As<wbr/>Message</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#encryptMessageData" class="tsd-kind-icon">encrypt<wbr/>Message<wbr/>Data</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#decryptMessageData" class="tsd-kind-icon">decrypt<wbr/>Message<wbr/>Data</a></li><li class="tsd-kind-method tsd-parent-kind-class"><a href="custom.MTProtoState.html#updateTimeOffset" class="tsd-kind-icon">update<wbr/>Time<wbr/>Offset</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li><li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>